(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3832:function(e,t,n){Promise.resolve().then(n.bind(n,4214))},4214:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var o=n(2438),r=n(8574);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var l=["shift","alt","meta","mod","ctrl"],a={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function u(e){return(a[e]||e).trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function c(e,t){return void 0===t&&(t=","),e.split(t)}function s(e,t,n){void 0===t&&(t="+");var o=e.toLocaleLowerCase().split(t).map(function(e){return u(e)}),r={alt:o.includes("alt"),ctrl:o.includes("ctrl")||o.includes("control"),shift:o.includes("shift"),meta:o.includes("meta"),mod:o.includes("mod")},a=o.filter(function(e){return!l.includes(e)});return i({},r,{keys:a,description:n})}"undefined"!=typeof document&&(document.addEventListener("keydown",function(e){void 0!==e.key&&p([u(e.key),u(e.code)])}),document.addEventListener("keyup",function(e){void 0!==e.key&&v([u(e.key),u(e.code)])})),"undefined"!=typeof window&&window.addEventListener("blur",function(){d.clear()});var d=new Set;function f(e){return Array.isArray(e)}function p(e){var t=Array.isArray(e)?e:[e];d.has("meta")&&d.forEach(function(e){return!l.includes(e)&&d.delete(e.toLowerCase())}),t.forEach(function(e){return d.add(e.toLowerCase())})}function v(e){var t=Array.isArray(e)?e:[e];"meta"===e?d.clear():t.forEach(function(e){return d.delete(e.toLowerCase())})}function y(e,t){var n=e.target;void 0===t&&(t=!1);var o=n&&n.tagName;return f(t)?!!(o&&t&&t.some(function(e){return e.toLowerCase()===o.toLowerCase()})):!!(o&&t&&!0===t)}var h=function(e,t,n){void 0===n&&(n=!1);var o,r=t.alt,i=t.meta,l=t.mod,a=t.shift,c=t.ctrl,s=t.keys,p=e.key,v=e.code,y=e.ctrlKey,h=e.metaKey,b=e.shiftKey,m=e.altKey,g=u(v),k=p.toLowerCase();if(!(null!=s&&s.includes(g))&&!(null!=s&&s.includes(k))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(g))return!1;if(!n){if(!m===r&&"alt"!==k||!b===a&&"shift"!==k)return!1;if(l){if(!h&&!y)return!1}else if(!h===i&&"meta"!==k&&"os"!==k||!y===c&&"ctrl"!==k&&"control"!==k)return!1}return!!(s&&1===s.length&&(s.includes(k)||s.includes(g)))||(s?(void 0===o&&(o=","),(f(s)?s:s.split(o)).every(function(e){return d.has(e.trim().toLowerCase())})):!s)},b=(0,r.createContext)(void 0),m=(0,r.createContext)({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),g=function(e){e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},k="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function w(e,t,n,o){var i,l=(0,r.useRef)(null),a=(0,r.useRef)(!1),d=n instanceof Array?o instanceof Array?void 0:o:n,w=f(e)?e.join(null==d?void 0:d.splitKey):e,C=n instanceof Array?n:o instanceof Array?o:void 0,x=(0,r.useCallback)(t,null!=C?C:[]),j=(0,r.useRef)(x);C?j.current=x:j.current=t;var E=(!function e(t,n){return t&&n&&"object"==typeof t&&"object"==typeof n?Object.keys(t).length===Object.keys(n).length&&Object.keys(t).reduce(function(o,r){return o&&e(t[r],n[r])},!0):t===n}((i=(0,r.useRef)(void 0)).current,d)&&(i.current=d),i.current),L=(0,r.useContext)(m).enabledScopes,S=(0,r.useContext)(b);return k(function(){if((null==E?void 0:E.enabled)!==!1&&(e=null==E?void 0:E.scopes,0===L.length&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):!!(!e||L.some(function(t){return e.includes(t)})||L.includes("*")))){var e,t=function(e,t){var n;if(void 0===t&&(t=!1),!y(e,["input","textarea","select"])||y(e,null==E?void 0:E.enableOnFormTags)){if(null!==l.current){var o=l.current.getRootNode();if((o instanceof Document||o instanceof ShadowRoot)&&o.activeElement!==l.current&&!l.current.contains(o.activeElement)){g(e);return}}(null==(n=e.target)||!n.isContentEditable||null!=E&&E.enableOnContentEditable)&&c(w,null==E?void 0:E.splitKey).forEach(function(n){var o,r,i,l=s(n,null==E?void 0:E.combinationKey);if(h(e,l,null==E?void 0:E.ignoreModifiers)||null!=(i=l.keys)&&i.includes("*")){if(null!=E&&null!=E.ignoreEventWhen&&E.ignoreEventWhen(e)||t&&a.current)return;if(("function"==typeof(o=null==E?void 0:E.preventDefault)&&o(e,l)||!0===o)&&e.preventDefault(),"function"==typeof(r=null==E?void 0:E.enabled)?!r(e,l):!0!==r&&void 0!==r){g(e);return}j.current(e,l),t||(a.current=!0)}})}},n=function(e){void 0!==e.key&&(p(u(e.code)),((null==E?void 0:E.keydown)===void 0&&(null==E?void 0:E.keyup)!==!0||null!=E&&E.keydown)&&t(e))},o=function(e){void 0!==e.key&&(v(u(e.code)),a.current=!1,null!=E&&E.keyup&&t(e,!0))},r=l.current||(null==d?void 0:d.document)||document;return r.addEventListener("keyup",o),r.addEventListener("keydown",n),S&&c(w,null==E?void 0:E.splitKey).forEach(function(e){return S.addHotkey(s(e,null==E?void 0:E.combinationKey,null==E?void 0:E.description))}),function(){r.removeEventListener("keyup",o),r.removeEventListener("keydown",n),S&&c(w,null==E?void 0:E.splitKey).forEach(function(e){return S.removeHotkey(s(e,null==E?void 0:E.combinationKey,null==E?void 0:E.description))})}}},[w,E,L]),l}let C=e=>{let{onClick:t,color:n,children:r}=e;return(0,o.jsx)("button",{onClick:t,style:{padding:"8px 12px",borderRadius:8,background:n,color:"white"},children:r})},x={Default:[{label:"TEST",color:"#059669"},{label:"PRIORITIZE",color:"#d97706"},{label:"REVIEW",color:"#2563eb"},{label:"FORCE",color:"#dc2626"}],Medium:[{label:"PANIC",color:"#ef4444"},{label:"GHOST",color:"#6b7280"},{label:"TIME-WARP",color:"#8b5cf6"}],Full:[{label:"PATCH-LOCK",color:"#4f46e5"},{label:"ROLLBACK",color:"#f97316"},{label:"SCOPE",color:"#14b8a6"}]},j=e=>{let{level:t,onAction:n,intent:r}=e,i=x.Default;return"Medium"===t?i=[...i,...x.Medium]:"Full"===t&&(i=[...i,...x.Medium,...x.Full]),(0,o.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:i.map(e=>{let{label:t,color:i}=e;return(0,o.jsx)(C,{onClick:()=>n(t.toLowerCase(),r),color:i,children:t},t)})})};function E(){var e,t;let[n,i]=(0,r.useState)(null),[l,a]=(0,r.useState)("BTCUSD"),[u,c]=(0,r.useState)("Default");async function s(){let e=await fetch("/api/plan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:l})});i(await e.json())}async function d(e,t){await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:e,intent:t})})}return!function(e){let t=t=>fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:t,intent:e.getIntent()})});w("shift+enter",()=>t("force")),w("shift+p",()=>t("prioritize")),w("shift+t",()=>t("test")),w("shift+r",()=>t("review"))}({getIntent:()=>{var e,t;return(null==n?void 0:null===(t=n.tasks)||void 0===t?void 0:null===(e=t[1])||void 0===e?void 0:e.order)||null}}),(0,o.jsxs)("main",{style:{padding:24,fontFamily:"Inter, system-ui, Arial"},children:[(0,o.jsx)("h1",{style:{fontSize:24,fontWeight:700},children:"Trade Composer"}),(0,o.jsxs)("div",{style:{display:"flex",gap:8,marginTop:12,alignItems:"center"},children:[(0,o.jsx)("input",{value:l,onChange:e=>a(e.target.value),placeholder:"Symbol e.g. BTCUSD",style:{padding:"8px 12px",border:"1px solid #ccc",borderRadius:8}}),(0,o.jsx)("button",{onClick:s,style:{padding:"8px 12px",borderRadius:8,background:"black",color:"white"},children:"Checkchart"}),(0,o.jsxs)("select",{value:u,onChange:e=>c(e.target.value),style:{padding:"8px 12px",border:"1px solid #ccc",borderRadius:8},children:[(0,o.jsx)("option",{children:"Default"}),(0,o.jsx)("option",{children:"Medium"}),(0,o.jsx)("option",{children:"Full"})]})]}),n&&(0,o.jsxs)("section",{style:{marginTop:16,border:"1px solid #eee",borderRadius:12,padding:16},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("b",{children:"Bias:"})," ",n.regime.bias]}),(0,o.jsxs)("div",{style:{opacity:.7,fontSize:13},children:["Levels: ",n.levels.map(e=>"".concat(e.type,"@").concat(e.price)).join(", ")]}),(0,o.jsx)("div",{style:{marginTop:12},children:(0,o.jsx)(j,{level:u,onAction:d,intent:(null===(t=n.tasks)||void 0===t?void 0:null===(e=t[1])||void 0===e?void 0:e.order)||null})})]})]})}function L(){return(0,o.jsx)(E,{})}}},function(e){e.O(0,[387,770,744],function(){return e(e.s=3832)}),_N_E=e.O()}]);